{
  "version": 3,
  "sources": ["../../../app/routes/moviesPage.jsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/moviesPage.jsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/moviesPage.jsx\");\n  import.meta.hot.lastModified = \"1742614890383.4385\";\n}\n// REMIX HMR END\n\nimport React, { useEffect, useState } from \"react\";\nimport MovieCard from \"../components/movie-card\";\nimport Navbar from \"../components/nav\";\nimport Footer from \"../components/footer\";\nexport default function MoviesPage() {\n  _s();\n  const [movies, setMovies] = useState([]);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const limit = 8; // movies per page\n\n  useEffect(() => {\n    const fetchMovies = async () => {\n      try {\n        const res = await fetch(`http://localhost:5000/api/movies?page=${page}&limit=${limit}&sortBy=avg_rating&order=DESC`);\n        const data = await res.json();\n\n        // prevent duplicates by using movie.id\n        setMovies(prev => {\n          const newMovieIds = new Set(prev.map(m => m.id));\n          const filtered = data.movies.filter(m => !newMovieIds.has(m.id));\n          return [...prev, ...filtered];\n        });\n        if (data.movies.length < limit || page >= data.totalPages) {\n          setHasMore(false);\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch movies:\", err);\n      }\n    };\n    fetchMovies();\n  }, [page]);\n  const handleLoadMore = () => {\n    if (hasMore) {\n      setPage(prevPage => prevPage + 1);\n    }\n  };\n  return <div className=\"min-h-screen w-full flex flex-col items-center bg-[#121212] text-white\">\n      <Navbar />\n\n      <div className=\"w-[95%] py-10 mt-10\">\n      <h2 className=\"text-2xl py-5 font-bold\">All Movies</h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n          {movies.map(movie => <MovieCard key={movie.id} id={movie.id} title={movie.title} imageUrl={movie.poster_url} releaseDate={movie.release_date} rating={movie.avg_rating} />)}\n        </div>\n\n        {hasMore && <div className=\"flex justify-center mt-10\">\n            <button onClick={handleLoadMore} className=\"px-6 py-2 bg-[#B8860B] text-white rounded-md hover:bg-yellow-700\">\n              Load More\n            </button>\n          </div>}\n      </div>\n\n      <Footer />\n    </div>;\n}\n_s(MoviesPage, \"MRBCy2EgEifo7kSIG+ZAVCQXWxQ=\");\n_c = MoviesPage;\nvar _c;\n$RefreshReg$(_c, \"MoviesPage\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAqBA,mBAA2C;AAsCrC;AA1DN,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,gCAAkC,EAAE;AAAA,EAC7E;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAI,KAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAA2B;AAC3B,cAAY,IAAI,eAAe;AACjC;AAOe,SAAR,aAA8B;AACnC,KAAG;AACH,QAAM,CAAC,QAAQ,SAAS,QAAI,uBAAS,CAAC,CAAC;AACvC,QAAM,CAAC,MAAM,OAAO,QAAI,uBAAS,CAAC;AAClC,QAAM,CAAC,SAAS,UAAU,QAAI,uBAAS,IAAI;AAC3C,QAAM,QAAQ;AAEd,8BAAU,MAAM;AACd,UAAM,cAAc,YAAY;AAC9B,UAAI;AACF,cAAM,MAAM,MAAM,MAAM,yCAAyC,cAAc,oCAAoC;AACnH,cAAM,OAAO,MAAM,IAAI,KAAK;AAG5B,kBAAU,UAAQ;AAChB,gBAAM,cAAc,IAAI,IAAI,KAAK,IAAI,OAAK,EAAE,EAAE,CAAC;AAC/C,gBAAM,WAAW,KAAK,OAAO,OAAO,OAAK,CAAC,YAAY,IAAI,EAAE,EAAE,CAAC;AAC/D,iBAAO,CAAC,GAAG,MAAM,GAAG,QAAQ;AAAA,QAC9B,CAAC;AACD,YAAI,KAAK,OAAO,SAAS,SAAS,QAAQ,KAAK,YAAY;AACzD,qBAAW,KAAK;AAAA,QAClB;AAAA,MACF,SAAS,KAAP;AACA,gBAAQ,MAAM,2BAA2B,GAAG;AAAA,MAC9C;AAAA,IACF;AACA,gBAAY;AAAA,EACd,GAAG,CAAC,IAAI,CAAC;AACT,QAAM,iBAAiB,MAAM;AAC3B,QAAI,SAAS;AACX,cAAQ,cAAY,WAAW,CAAC;AAAA,IAClC;AAAA,EACF;AACA,SAAO,mDAAC,SAAI,WAAU,0EAClB;AAAA,uDAAC,iBAAD;AAAA;AAAA;AAAA;AAAA,WAAQ;AAAA,IAER,mDAAC,SAAI,WAAU,uBACf;AAAA,yDAAC,QAAG,WAAU,2BAA0B,0BAAxC;AAAA;AAAA;AAAA;AAAA,aAAkD;AAAA,MAChD,mDAAC,SAAI,WAAU,uEACZ,iBAAO,IAAI,WAAS,mDAAC,aAAyB,IAAI,MAAM,IAAI,OAAO,MAAM,OAAO,UAAU,MAAM,YAAY,aAAa,MAAM,cAAc,QAAQ,MAAM,cAAvH,MAAM,IAAtB;AAAA;AAAA;AAAA;AAAA,aAAmJ,CAAE,KAD5K;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,MAEC,WAAW,mDAAC,SAAI,WAAU,6BACvB,6DAAC,YAAO,SAAS,gBAAgB,WAAU,oEAAmE,yBAA9G;AAAA;AAAA;AAAA;AAAA,aAEA,KAHQ;AAAA;AAAA;AAAA;AAAA,aAIV;AAAA,SAVJ;AAAA;AAAA;AAAA;AAAA,WAWA;AAAA,IAEA,mDAAC,YAAD;AAAA;AAAA;AAAA;AAAA,WAAQ;AAAA,OAhBL;AAAA;AAAA;AAAA;AAAA,SAiBL;AACJ;AACA,GAAG,YAAY,8BAA8B;AAC7C,KAAK;AACL,IAAI;AACJ,aAAa,IAAI,YAAY;AAE7B,OAAO,eAAe;AACtB,OAAO,eAAe;",
  "names": []
}
